HANDOFF PACKET: In-App Announcement Banner v1 (Frontend)
========================================================
Date: 2026-02-01
Branch: main
Repo: github.com/paulyd-oi/open-invite-app.git
Commit: 76b8b7c

SUMMARY
-------
Added AnnouncementBanner component that shows server-driven announcements.
Dismissal is user-scoped AND message-scoped (new message = new banner).
Banner appears below UpdateBanner in global layout.

FILES CHANGED
-------------
- src/components/AnnouncementBanner.tsx (NEW) - Banner component
- src/app/_layout.tsx - Import + render AnnouncementBanner
- src/ui/icons.tsx - Added Megaphone icon

COMPONENT DETAILS
-----------------
AnnouncementBanner:
- Fetches config from /api/app-config (shared query with UpdateBanner)
- Shows message text with optional CTA button
- Dismissible X button (if dismissible=true)
- CTA button navigates to ctaRoute

DISMISSAL LOGIC
---------------
AsyncStorage key: announcement_dismissed:{userId}:{messageHash}
- userId: from session.user.id (no userId = no banner)
- messageHash: simple hash of message text (8 char hex)
- New message = new key = banner shows again

INVARIANTS ENFORCED
-------------------
- If announcement.enabled is false -> never show
- If message is empty -> never show
- If no userId (not logged in) -> never show
- If already dismissed this message -> never show

DEV LOGGING
-----------
[ANNOUNCEMENT_BANNER] logs in __DEV__ mode for debugging

VERIFICATION
------------
npm run typecheck - PASS
bash scripts/ai/verify_frontend.sh - PASS

HOW TO TEST
-----------
1. Set Render env vars (see backend handoff)
2. App fetches /api/app-config on boot
3. If announcement.enabled=true and message non-empty:
   - Banner shows below UpdateBanner
   - CTA button navigates to ctaRoute
   - X button dismisses (persisted per user+message)
4. Change message in Render -> new banner shows

NO NEW DEPENDENCIES
-------------------
Uses existing: AsyncStorage, useQuery, Ionicons (megaphone-outline)
