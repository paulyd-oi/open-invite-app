========================================
HANDOFF PACKET - Legacy Groups UI Purge
========================================
Date: 2026-01-29
Branch: main
Author: GitHub Copilot (Claude Opus 4.5)

========================================
SUMMARY
========================================
Fully removed legacy "Groups" UI from frontend. Circles remain
the only group-like concept. Users now only see Circles (Planning)
on Friends screen, no legacy group filter or management UI.

REMOVED:
- Friends screen: Group filter button, Group Filter Modal, Edit Group Modal
- Friend profile: "Groups Together" section completely removed
- src/lib/displayHelpers.ts (cleanGroupName function - no longer needed)

PRESERVED:
- Circles feature (unchanged)
- All navigation architecture
- Backend contracts (unchanged - frontend only purge)

========================================
FILES CHANGED
========================================
src/app/friends.tsx
  - Removed: cleanGroupName import
  - Removed: GetGroupsResponse, FriendGroup type imports
  - Removed: Filter icon import
  - Removed: selectedGroupId, showGroupFilter, editingGroup, editGroupColor states
  - Removed: GROUP_COLORS constant
  - Removed: initialGroupId URL param usage
  - Removed: groups query (/api/groups)
  - Removed: updateGroupMutation, deleteGroupMutation, removeMemberFromGroupMutation
  - Removed: Group filter button from Friends section header
  - Removed: Group Filter Modal (~150 lines)
  - Removed: Edit Group Modal (~200 lines)
  - Removed: Delete Group Confirmation modal
  - Simplified: filteredFriends (no group filtering, just pinned sorting)
  - Added: [LEGACY_GROUPS_PURGED] DEV log

src/app/friend/[id].tsx
  - Removed: cleanGroupName import
  - Removed: Users icon import (was only used for Groups Together)
  - Removed: GetFriendsResponse, GetGroupsResponse, FriendGroup type imports
  - Removed: friendsData query
  - Removed: groupsData query
  - Removed: friendship memo
  - Removed: groups variable
  - Removed: "Groups Together" section (~40 lines)
  - Added: [LEGACY_GROUPS_PURGED] DEV log

src/lib/displayHelpers.ts
  - DELETED: File no longer needed (cleanGroupName was only export)

docs/STATE_OF_THE_APP.md
  - Added: "Legacy Groups UI fully removed" entry at top of Stable section
  - Updated: "Fixed This Session" section

========================================
PROOF - RG BEFORE (top hits)
========================================
groupMemberships:
  src/app/friend/[id].tsx:483,484 (sharedGroups memo)
  src/app/friends.tsx:1116 (group filter)

cleanGroupName(:
  src/app/friends.tsx:76,1567,1976,2053
  src/app/friend/[id].tsx:19,662

"Groups Together":
  src/app/friend/[id].tsx:635

========================================
PROOF - RG AFTER (all clean)
========================================
groupMemberships in src/app/friends.tsx → CLEAN (0 matches)
groupMemberships in src/app/friend/[id].tsx → CLEAN (0 matches)
"Groups Together" (rendered) → CLEAN (only marker comment)
"Add to Groups" (rendered) → CLEAN (only marker comments)

========================================
VERIFY RESULTS
========================================
bash scripts/ai/verify_frontend.sh → PASS
npm run typecheck → PASS (0 errors)

========================================
DEV-ONLY LOGS ADDED
========================================
src/app/friends.tsx:
  if (__DEV__) console.log("[LEGACY_GROUPS_PURGED] legacy groups UI removed");

src/app/friend/[id].tsx:
  if (__DEV__) console.log("[LEGACY_GROUPS_PURGED] legacy groups UI removed");

========================================
RISK NOTES
========================================
- LOW RISK: Frontend-only change, no backend modifications
- Circles feature completely unchanged
- shared/contracts.ts groupMemberships field untouched (may still be used elsewhere)

========================================
COMMIT
========================================
chore(legacy): purge legacy groups UI

========================================
END HANDOFF
