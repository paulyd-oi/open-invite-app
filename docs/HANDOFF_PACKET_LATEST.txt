HANDOFF PACKET - Entitlements Gating + MiniCalendar Fix + Logout Invariants
================================================================================

SUMMARY
-------
1. useEntitlements hook now accepts `enabled` parameter for bootStatus gating
2. MiniCalendar gating changed from `!!session` to `bootStatus === 'authed'`
3. Logout key deletion consolidated with enumerated keys + [LOGOUT_INVARIANT] log

PRECHECK
--------
pwd: /Users/paulsmbp/Documents/GitHub/open-invite-app
branch: main
remote: https://github.com/paulyd-oi/open-invite-app.git
status: modified (pending commit)

ROOT CAUSE
----------
1. ENTITLEMENTS: useEntitlements() had no `enabled` gating option, causing
   fetch during logout/loading when caller couldn't gate it.

2. MINICALENDAR: Component gated on `!!session` but session may persist in
   cache after logout â†’ 401 spam during transition.

3. LOGOUT AUDIT: Key deletion was scattered across multiple log lines with
   no consolidated audit trail for debugging account switch issues.

CHANGES
-------
Files changed:
- src/lib/entitlements.ts - Added optional `{ enabled?: boolean }` param
- src/app/friends.tsx - MiniCalendar accepts bootStatus prop, FriendCard/FriendListItem pass it
- src/lib/authBootstrap.ts - Enumerated SECURESTORE_AUTH_KEYS, ASYNCSTORAGE_AUTH_KEYS, single [LOGOUT_INVARIANT] log
- docs/STATE_OF_THE_APP.md - Updated
- docs/FINDINGS_LOG.md - Added three new findings

KEY DIFFS
---------
entitlements.ts useEntitlements():
  BEFORE: useEntitlements() { useQuery({ enabled: true, ... }) }
  AFTER:  useEntitlements(options?: { enabled?: boolean }) { useQuery({ enabled: options?.enabled ?? true, ... }) }

friends.tsx MiniCalendar:
  BEFORE: enabled: !!session && !!friendshipId
  AFTER:  enabled: bootStatus === 'authed' && !!friendshipId

authBootstrap.ts resetSession():
  NEW: SECURESTORE_AUTH_KEYS = [...all known keys...]
  NEW: ASYNCSTORAGE_AUTH_KEYS = [...all known keys...]
  NEW: console.log("[LOGOUT_INVARIANT]", JSON.stringify({
         keysDeleted, keysFailed, verifyCleared, verifyRemaining, success
       }))

TESTING
-------
Commands run:
- npm run typecheck: PASSED
- scripts/ai/verify_frontend.sh: PASSED

MANUAL TEST PLAN
----------------
A) Logout scenario:
   - Tap logout
   - Observe console for single [LOGOUT_INVARIANT] log
   - Verify keysDeleted includes all auth keys
   - Verify keysFailed is empty
   - Verify success: true

B) Account switch scenario:
   - Logout from account A
   - Login to account B
   - Confirm no 401 spam during transition
   - Confirm no data contamination (account A data showing for B)

GIT STATUS
----------
Commit: PENDING
Push: PENDING

STATE UPDATE
------------
STATE_OF_THE_APP updated: YES
FINDINGS_LOG updated: YES
INVARIANTS changed: YES (added [LOGOUT_INVARIANT])

NEXT AGENT
----------
- Commit and push these changes
- Test logout flow manually and verify [LOGOUT_INVARIANT] JSON appears
- If any keysFailed entries appear in log, investigate why deletion failed
